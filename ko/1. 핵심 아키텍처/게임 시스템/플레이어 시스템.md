# 핵심 아키텍처 - 게임 시스템 - 플레이어 시스템

## 개요
플레이어 시스템은 광부 시뮬레이터의 핵심 시스템으로, 플레이어 캐릭터의 상태, 장비, 인벤토리, 진행 상황을 관리합니다. 이 시스템은 여러 하위 시스템으로 구성되어 있으며, 각각이 독립적으로 작동하면서도 서로 유기적으로 연결되어 있습니다.

## 플레이어 시스템 구조

### 주요 컴포넌트
- **장비 시스템 (Equipment)**: 무기, 방어구, 악세서리 관리
- **인벤토리 시스템 (Inventory)**: 아이템 저장 및 관리
- **수집 시스템 (Collection)**: 수집품 및 도감 관리  
- **펫 시스템 (Pet)**: 동반자 펫 관리
- **건설 시스템 (Construction)**: 구조물 건설 및 배치
- **칭호 시스템 (Title)**: 플레이어 칭호 관리
- **엠블럼 시스템 (Emblem)**: 엠블럼 장착 및 효과
- **이모티콘 시스템 (Emoticon)**: 감정 표현 시스템

## 관련 파일 경로

### 플레이어 컴포넌트 스크립트
```
RootDesk/MyDesk/Components/Player/
├── Equipment/
│   ├── EquipmentUI.mlua                    # 장비 UI 관리
│   ├── EquipmentUISlotButton.mlua          # 장비 슬롯 버튼
│   ├── EquipmentStorage.mlua               # 장비 저장소
│   └── PlayerEquipmentManager.mlua         # 장비 매니저
├── Inventory/
│   ├── InventoryUI.mlua                    # 인벤토리 UI
│   ├── InventoryUISlotButton.mlua          # 인벤토리 슬롯
│   ├── InventoryManager.mlua               # 인벤토리 매니저
│   └── ItemDragDropHandler.mlua            # 아이템 드래그앤드롭
├── Collection/
│   ├── CollectionUI.mlua                   # 수집품 UI
│   ├── CollectionManager.mlua              # 수집품 매니저
│   └── CollectionProgressTracker.mlua      # 수집 진행도 추적
├── Pet/
│   ├── PetUI.mlua                          # 펫 UI
│   ├── PetManager.mlua                     # 펫 매니저
│   ├── PetAI.mlua                          # 펫 AI 행동
│   └── PetSummonSystem.mlua                # 펫 소환 시스템
├── Construction/
│   ├── ConstructionUI.mlua                 # 건설 UI
│   ├── ConstructionManager.mlua            # 건설 매니저
│   └── BuildingPlacer.mlua                 # 건물 배치
└── Title/
    ├── TitleUI.mlua                        # 칭호 UI
    └── TitleManager.mlua                   # 칭호 매니저
```

### UI 그룹 파일들
- `ui/InventoryGroup.ui`: 인벤토리 UI 그룹
- `ui/EquipmentStorageGroup.ui`: 장비 저장소 UI 그룹
- `ui/CollectionGroup.ui`: 수집품 UI 그룹
- `ui/ConstructionGroup.ui`: 건설 UI 그룹
- `ui/TitleStorageGroup.ui`: 칭호 저장소 UI 그룹
- `ui/EmblemGroup.ui`: 엠블럼 UI 그룹
- `ui/EmoticonGroup.ui`: 이모티콘 UI 그룹

### 데이터 파일들
```
RootDesk/MyDesk/DataSets/
├── EquipmentData.csv                       # 장비 기본 데이터
├── ItemData.csv                            # 아이템 기본 정보
├── PetData.csv                             # 펫 기본 데이터
├── TitleData.csv                           # 칭호 데이터
├── CollectionData.csv                      # 수집품 데이터
├── ConstructionData.csv                    # 건설 데이터
├── EmblemData.csv                          # 엠블럼 데이터
└── EmoticonData.csv                        # 이모티콘 데이터
```

## 시스템 간 상호작용

### 장비 시스템과 인벤토리 연동
```lua
-- 장비 착용 시 인벤토리에서 제거
Equipment:EquipItem(itemId) -> Inventory:RemoveItem(itemId)

-- 장비 해제 시 인벤토리로 이동  
Equipment:UnequipItem(slot) -> Inventory:AddItem(item)
```

### 수집 시스템과 업적 연동
- 새로운 수집품 획득 시 업적 시스템에 알림
- 수집 완성도에 따른 칭호 해금

### 펫 시스템과 게임플레이 연동
- 펫의 자동 수집 기능
- 펫의 전투 지원 능력
- 펫 레벨업 시 능력치 향상

## 데이터 흐름

### 플레이어 데이터 저장
1. 각 시스템의 상태 정보 수집
2. TableSync를 통한 데이터 동기화
3. 서버에 플레이어 진행 상황 저장

### 플레이어 데이터 로드
1. 서버에서 플레이어 데이터 로드
2. 각 시스템에 데이터 복원
3. UI 상태 업데이트

## 확장 가이드

### 새로운 장비 타입 추가
1. `EquipmentData.csv`에 새 장비 정보 추가
2. `EquipmentManager.mlua`에 새 장비 타입 처리 로직 추가
3. UI에 새 장비 슬롯 추가

### 새로운 수집품 카테고리 추가  
1. `CollectionData.csv`에 새 카테고리 추가
2. `CollectionManager.mlua`에 카테고리별 처리 로직 구현
3. `CollectionUI.mlua`에 새 카테고리 탭 추가
