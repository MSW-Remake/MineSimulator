# 개발 가이드 - 에셋 관리 - 모델 및 이미지 관리

## 개요
광부 시뮬레이터 프로젝트의 3D 모델, 이미지, 아틀라스 등 에셋 관리에 대한 가이드입니다.

## 에셋 폴더 구조

### 모델 파일들
```
RootDesk/MyDesk/Models/
├── Guide_Key/              # 가이드 키 모델들
├── Items/                  # 아이템 모델들
├── Mine/                   # 광산 오브젝트 모델들
├── NPCs/                   # NPC 모델들
├── Players/                # 플레이어 모델들
├── Traps/                  # 트랩 모델들
└── MapObjects/             # 맵 오브젝트들
```

### 이미지 파일들
```
RootDesk/MyDesk/Images/
├── UI/                     # UI 이미지들
├── 장비/                   # 장비 아이콘들
│   ├── 가방/               # 가방 아이콘
│   ├── 무기/               # 무기 아이콘  
│   ├── 신발/               # 신발 아이콘
│   └── 옷/                 # 옷 아이콘
├── 광맥/                   # 광맥 이미지들
└── 의자 리소스/            # 의자 이미지들
```

### 아틀라스 파일들
```
RootDesk/MyDesk/Atlas/
├── common.blueprintatlas        # 공통 아틀라스
├── common2.blueprintatlas       # 공통 아틀라스 2
├── icon.blueprintatlas          # 아이콘 아틀라스
└── ui.blueprintatlas           # UI 아틀라스
```

## 에셋 사용 방법

### 모델 스폰
```lua
-- 모델 스폰
local spawnPos = Vector3(0, 1, 0)
local spawnedModel = _SpawnService:SpawnByModelId(
    "model://model_uuid_here", 
    "SpawnedObjectName", 
    spawnPos, 
    parentEntity)
```

### 이미지 설정
```lua
-- SpriteGUIRenderer에 이미지 설정
local imageComponent = entity.SpriteGUIRendererComponent
imageComponent.ImageRUID = "image_uuid_here"

-- 아틀라스에서 이미지 사용
local atlasSprite = entity.AtlasSpriteComponent
atlasSprite.AtlasRUID = "atlas_uuid_here"
atlasSprite.SpriteName = "sprite_name_in_atlas"
```

### 동적 에셋 로딩
```lua
method void LoadAssetDynamically(string assetType, number itemId)
    local assetTable = _DataService:GetTable(assetType)
    local assetRUID = assetTable:GetCell(itemId, "AssetRUID")
    
    if assetRUID and assetRUID ~= "" then
        -- 이미지인 경우
        if assetType == "ItemIcon" then
            self.Entity.SpriteGUIRendererComponent.ImageRUID = assetRUID
        -- 모델인 경우  
        elseif assetType == "ItemModel" then
            local model = _SpawnService:SpawnByModelId(
                "model://" .. assetRUID, 
                "DynamicModel", 
                self.Entity.Transform.Position)
        end
    end
end
```

## 에셋 최적화

### 메모리 관리
```lua
-- 사용하지 않는 에셋 언로드
method void UnloadUnusedAssets()
    local unusedModels = self:GetUnusedModels()
    
    for _, model in ipairs(unusedModels) do
        model:Destroy()
    end
    
    -- 텍스처 캐시 정리
    _ResourceManager:ClearTextureCache()
end
```

### LOD (Level of Detail)
```lua
-- 거리에 따른 모델 품질 조절
method void UpdateModelLOD(Entity model, number distance)
    if distance > 50 then
        model.ModelComponent:SetLODLevel(0)  -- 낮은 품질
    elseif distance > 20 then
        model.ModelComponent:SetLODLevel(1)  -- 중간 품질  
    else
        model.ModelComponent:SetLODLevel(2)  -- 높은 품질
    end
end
```